#!/bin/sh

# B: Common C++ library
# Copyright (C) 2002-2007, 2016 Damon Revoe
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2.1 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#

usage()
{
	cat <<EOF
Usage: @PACKAGE@-config [OPTIONS]
Options:
	[--exists]
	[--version]
	[--prefix]
	[--exec-prefix]
	[--flags]
	[--libs]
	[--multithreaded]
	[--debug]
EOF
	exit $1
}

if test $# -eq 0
then
	usage 1 1>&2
fi

model="single-threaded"
configuration="release"

while test $# -gt 0
do
	case "$1" in
	--exists)
		check_presence=yes
		;;
	--version)
		echo_version=yes
		;;
	--prefix)
		echo_prefix=yes
		;;
	--exec-prefix)
		echo_exec_prefix=yes
		;;
	--flags)
		echo_flags=yes
		;;
	--libs)
		echo_libs=yes
		;;
	--multithreaded)
		mt_suffix="_r"
		model="multithreaded"
		;;
	--debug)
		debug_suffix="d"
		configuration="debug"
		;;
	*)
		usage 1 1>&2
		;;
	esac
	shift
done

conf="`echo $0 | sed 's/-config\$//'`$debug_suffix$mt_suffix.conf"

if test -n "$check_presence"
then
	test -f "$conf"
	exit
fi

if test ! -f "$conf"
then
	echo "@PACKAGE@-config: '$model $configuration' is not installed" 1>&2
	exit 1
fi

. "$conf"

test -z "$echo_version" || result="$version"
test -z "$echo_prefix" || result="$result $prefix"
test -z "$echo_exec_prefix" || result="$result $exec_prefix"
test -z "$echo_flags" || result="$result $flags"
test -z "$echo_libs" || result="$result $libs"

test -z "$result" || echo $result
